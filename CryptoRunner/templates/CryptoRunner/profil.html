<!DOCTYPE html> {% load static %}
<html>

<head>
    <meta charset="utf-8">
    <title>{{title}}</title>
    <script>
        const url = "{% url 'profil'%}"
        async function getData(method, url, body = null) {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest()

                xhr.open(method, url)

                xhr.responseType = 'json'
                xhr.setRequestHeader('Content-Type', 'application/json')

                xhr.onload = () => {
                    if (xhr.status >= 400)
                        reject(xhr.response)
                    else
                        resolve(xhr.response)
                }

                xhr.onerror = () => {
                    reject(xhr.response)
                }

                xhr.send(JSON.stringify(body))
            })
        }
        
        async function plei(u) {
            await getData('POST', url, {
                'plei': u
            });
            window.location.href = "{% url 'geim'%}";
        }
    </script>
</head>

<body>
    <div>
        <div>
            #фото#<br> имя:{{naim}}
        </div><br>

        <div>
            Money:{{Money}}<br> Energia:{{Energia}}/{{EnergiaMax}}<br>
        </div><br>
    </div><br> NFT
    <div>
        {% for NFT in NFTs%}
        <div>
            #фото#<br> Nick:{{NFT.Nick}}
            <br> idHash:{{NFT.idHash}}
            <br> Energia:{{NFT.Energia}}/{{NFT.EnergiaMax}}
            <br> DataSozdania:{{NFT.DataSozdania}}
            <br>
            <button onclick="plei('{{NFT.idHash}}')">играть</button>
        </div><br> {% endfor %}
    </div><br>
</body>

</html>